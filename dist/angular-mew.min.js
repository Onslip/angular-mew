/*!
 * angular-mew v0.1.0 - An angular wrapper for the Hawk HTTP authentication scheme
 * Copyright Maarten Schroeven and other contributors
 * Released under the MIT license
 */
!function(){"use strict";angular.module("angular-mew",[])}(),function(e){"use strict";var t=["sha256"];"object"==typeof e&&e.hasOwnProperty("crypto")&&(t=e.crypto.algorithms),angular.module("angular-mew").constant("Hawk",e).constant("HawkAlgorithms",t).constant("HawkErrors",{ALGORITHM:"Unsupported algorithm, please use the 'HawkAlgorithms' constant to get a valid algorithm.",MISSING_CREDENTIALS:"Hawk authentication is enabled but credentials are missing.",MISSING_ALGORITHM:"Hawk authentication is enabled but algorithm is missing.",HEADER_GENERATION:"Hawk header generation failed",RESPONSE_VALIDATION:"Hawk server response validation failed",HAWK_UNAVAILABLE:"Hawk library isn't available"})}(hawk),function(){"use strict";function e(e,t){function r(e,t){o.credentials.id=e,o.credentials.secret=t}function n(r){if(-1==e.indexOf(r))throw t.ALGORITHM;o.algorithm=r}function a(e){o.enabled=e}function i(e){o.checkServerAuthorization=e}var o={algorithm:e[0],credentials:{id:void 0,secret:void 0},enabled:!1,checkServerAuthorization:!0};return{setEnabled:a,setAlgorithm:n,setCredentials:r,setCheckServerAuthorization:i,getSettings:function(){return JSON.parse(JSON.stringify(o))}}}angular.module("angular-mew").factory("HawkConfiguration",e),e.$inject=["HawkAlgorithms","HawkErrors"]}(),function(){"use strict";function e(e,t,r,n,a,i,o){function u(e){var t=i.getSettings(),r={key:t.credentials.secret,id:t.credentials.id,algorithm:t.algorithm};if("undefined"!=typeof e.hawk.credentials&&(r.key=e.hawk.credentials.key,r.id=e.hawk.credentials.id),"undefined"!=typeof e.hawk.algorithm){if(-1==a.indexOf(e.hawk.algorithm))throw o.ALGORITHM;r.algorithm=e.hawk.algorithm}return r}function s(e){var t=i.getSettings(),r="undefined"!=typeof e.hawk.enabled&&!e.hawk.enabled;if(t.enabled){if(r)return!0}else if("undefined"==typeof e.hawk.enabled||r)return!0;return!1}function c(a){var i=!1;if("undefined"==typeof a.hawk&&(a.hawk={},i=!0),s(a))return i&&delete a.hawk,a;t.debug("intercepting http request");var c={credentials:u(a)};if(null==c.credentials.key||null==c.credentials.id)return r.reject({reason:o.MISSING_CREDENTIALS,config:a});if("string"==typeof a.url&&!a.url.match(n.utils.uriRegex)){var l=e.protocol()+"://";l+=e.host();var d=e.port();80!==d&&(l+=":"+d),a.url=l+a.url}var f=n.client.header(a.url,a.method,c);return"undefined"!=typeof f.err?r.reject({reason:o.HEADER_GENERATION+': "'+f.err+'"',config:a}):(a.headers.Authorization=f.field,a.hawk.artifacts=f.artifacts,a)}function l(e){var a=!1;"undefined"==typeof e.config.hawk&&(e.config.hawk={},a=!0);var c=i.getSettings();if(s(e.config)||!c.checkServerAuthorization)return a&&delete e.config.hawk,e;t.debug("intercepting http response"),e.getResponseHeader=e.headers;var l={},d=e.headers("Server-Authorization");"undefined"!=typeof e.data&&d.indexOf('hash="')>-1&&(l.payload=e.data);var f=n.client.authenticate(e,u(e.config),e.config.hawk.artifacts,l);return f?e:r.reject({reason:o.RESPONSE_VALIDATION,response:e})}return{request:c,response:l}}angular.module("angular-mew").factory("HawkInterceptor",e),e.$inject=["$location","$log","$q","Hawk","HawkAlgorithms","HawkConfiguration","HawkErrors"]}(),function(){"use strict";function e(e){e.interceptors.push("HawkInterceptor")}angular.module("angular-mew").config(e),e.$inject=["$httpProvider"]}(),function(){"use strict";function e(e,t,r){if(null==e)throw t.HAWK_UNAVAILABLE}angular.module("angular-mew").run(e),e.$inject=["Hawk","HawkErrors","HawkConfiguration"]}();